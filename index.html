<!doctype html>
<html lang="it">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Spear Fishing Ugljan – Mappa, Meteo, Pesci, Formazione</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <header class="topbar">
      <h1>Spear Fishing – Isola di Ugljan (Croazia)</h1>
      <nav class="nav">
        <button data-target="mappa">Mappa</button>
        <button data-target="meteo">Meteo</button>
        <button data-target="pesci">Tipologie di pesci</button>
        <button data-target="formazione">Formazione</button>
        <button data-target="regole">Regolamenti</button>
        <button data-target="planner">Planner</button>
      </nav>
    </header>

    <main>
      <section id="mappa" class="view active">
        <div id="map"></div>

        <div class="panel">
          <h2>Quick‑copy GPS (incolla in Google Earth)</h2>
          <textarea id="gpsBlock" rows="6" readonly></textarea>
          <div class="row">
            <button id="copyGps">Copia coordinate</button>
            <span id="copyStatus" class="hint"></span>
          </div>
        </div>
      </section>

      <section id="meteo" class="view">
        <h2>Meteo, onde, sole e maree – Ugljan</h2>
        <div class="row">
          <button id="refreshWeather">Aggiorna ora</button>
          <span id="lastUpdate" class="hint"></span>
        </div>
        <div class="cards">
          <div class="card">
            <h3>Meteo attuale</h3>
            <div id="wxNow">—</div>
          </div>
          <div class="card">
            <h3>Onde (prossime ore)</h3>
            <div id="waves">—</div>
          </div>
          <div class="card">
            <h3>Sole</h3>
            <div id="sun">—</div>
          </div>
          <div class="card">
            <h3>Marea</h3>
            <div id="tide">
              <p>Usa il riferimento Zadar:</p>
              <a id="tideLink" href="#" target="_blank" rel="noopener">Apri tabella maree</a>
            </div>
          </div>
        </div>
      </section>

      <section id="pesci" class="view">
        <h2>Tipologie di pesci e tattiche (pesca subacquea con fucile)</h2>
        <div id="fishGrid" class="cards"></div>
      </section>

      <section id="formazione" class="view">
        <h2>Formazione</h2>
        <p>
          Sezione dedicata a tecniche, respirazione, gestione sagolino e tattiche
          specifiche per specie. Apri il tuo assistente EI per una guida interattiva.
        </p>
        <div class="row">
          <a id="eiLink" class="button" href="#" target="_blank" rel="noopener">Apri il mio EI</a>
        </div>
        <details>
          <summary>Checklist veloce di sicurezza</summary>
          <ul>
            <li>Mai da solo. Boa e bandiera sempre.</li>
            <li>Carica e scarica il fucile solo in acqua, volata sempre in sicurezza.</li>
            <li>Rispettare taglie minime e periodi di chiusura.</li>
          </ul>
        </details>
      </section>

      <section id="regole" class="view">
        <h2>Taglie minime e note (Agg. Ago 2025)</h2>
        <div class="tableWrap">
          <table id="rulesTable"></table>
        </div>
        <p>
          Fonte ufficiale: <a href="https://ribarstvo.mps.hr" target="_blank" rel="noopener">Pravilnik o zaštiti riba</a>
        </p>
      </section>

      <section id="planner" class="view">
        <h2>Planner giornaliero</h2>
        <div class="tableWrap">
          <table id="plannerTable"></table>
        </div>
        <h3>Checklist decisionale</h3>
        <ul id="checklist"></ul>
      </section>
    </main>

    <footer class="footer">
      <small>© 2025 Spear Fishing Ugljan • Dati meteo da Open‑Meteo • Mappa Leaflet</small>
    </footer>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script src="config.js"></script>
    <script src="data.js"></script>
    <script src="script.js"></script>
  </body>
  </html>

